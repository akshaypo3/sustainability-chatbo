apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: sustainability-chatbo-template
spec:
  entrypoint: main
  templates:
    - name: main
      container:
        image: akshay1p1/sustainability-chatbo:latest
        command: ["python"]
        args: ["app.py"]
        env:
          - name: SUPABASE_URL
            valueFrom:
              secretKeyRef:
                name: supabase-secret
                key: SUPABASE_URL
          - name: SUPABASE_KEY
            valueFrom:
              secretKeyRef:
                name: supabase-secret
                key: SUPABASE_KEY
          - name: GEMINI_API_KEY
            valueFrom:
              secretKeyRef:
                name: gemini-secret
                key: GEMINI_API_KEY
---
apiVersion: ai.sap.com/v1alpha1
kind: Deployment
metadata:
  name: sustainability-chatbo-deployment
spec:
  template:
    name: sustainability-chatbo-template
  runtime:
    replicas: 1
